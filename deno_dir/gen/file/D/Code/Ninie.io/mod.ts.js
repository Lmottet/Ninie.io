import { Client, Intents } from "./deps.ts";
import { Repository } from "./src/repository.ts";
window.Repository = new Repository();
export const botCache = {
    commands: new Map(),
    commandAliases: new Map(),
    guildPrefixes: new Map(),
    inhibitors: new Map(),
    eventHandlers: {},
    arguments: new Map(),
};
const importDirectory = async (path) => {
    const files = Deno.readDirSync(Deno.realPathSync(path));
    for (const file of files) {
        if (!file.name)
            continue;
        const currentPath = `${path}/${file.name}`;
        if (file.isFile) {
            await import(currentPath);
            continue;
        }
        importDirectory(currentPath);
    }
};
await Promise.all([
    "./src/commands",
    "./src/inhibitors",
    "./src/events",
    "./src/arguments",
].map((path) => importDirectory(path)));
const discord_client_id = Deno.env.get("DISCORD_CLIENT_ID");
const discord_token_id = Deno.env.get("DISCORD_BOT_TOKEN");
const intents = [
    Intents.GUILD_PRESENCES,
    Intents.GUILD_MESSAGES,
    Intents.GUILDS,
];
Client({
    token: discord_token_id ? discord_token_id : "",
    intents: intents,
    eventHandlers: botCache.eventHandlers,
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxNQUFNLEVBQXdCLE9BQU8sRUFBVyxNQUFNLFdBQVcsQ0FBQztBQUUzRSxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFTakQsTUFBTSxDQUFDLFVBQVUsR0FBRyxJQUFJLFVBQVUsRUFBRSxDQUFDO0FBRXJDLE1BQU0sQ0FBQyxNQUFNLFFBQVEsR0FBRztJQUN0QixRQUFRLEVBQUUsSUFBSSxHQUFHLEVBQW1CO0lBQ3BDLGNBQWMsRUFBRSxJQUFJLEdBQUcsRUFBa0I7SUFDekMsYUFBYSxFQUFFLElBQUksR0FBRyxFQUFrQjtJQUN4QyxVQUFVLEVBQUUsSUFBSSxHQUFHLEVBR2hCO0lBQ0gsYUFBYSxFQUFFLEVBQW1CO0lBQ2xDLFNBQVMsRUFBRSxJQUFJLEdBQUcsRUFBb0I7Q0FDdkMsQ0FBQztBQUVGLE1BQU0sZUFBZSxHQUFHLEtBQUssRUFBRSxJQUFZLEVBQUUsRUFBRTtJQUM3QyxNQUFNLEtBQUssR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztJQUV4RCxLQUFLLE1BQU0sSUFBSSxJQUFJLEtBQUssRUFBRTtRQUN4QixJQUFJLENBQUMsSUFBSSxDQUFDLElBQUk7WUFBRSxTQUFTO1FBRXpCLE1BQU0sV0FBVyxHQUFHLEdBQUcsSUFBSSxJQUFJLElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztRQUMzQyxJQUFJLElBQUksQ0FBQyxNQUFNLEVBQUU7WUFDZixNQUFNLE1BQU0sQ0FBQyxXQUFXLENBQUMsQ0FBQztZQUMxQixTQUFTO1NBQ1Y7UUFFRCxlQUFlLENBQUMsV0FBVyxDQUFDLENBQUM7S0FDOUI7QUFDSCxDQUFDLENBQUM7QUFHRixNQUFNLE9BQU8sQ0FBQyxHQUFHLENBQ2Y7SUFDRSxnQkFBZ0I7SUFDaEIsa0JBQWtCO0lBQ2xCLGNBQWM7SUFDZCxpQkFBaUI7Q0FDbEIsQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLEVBQUUsRUFBRSxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUN2QyxDQUFDO0FBRUYsTUFBTSxpQkFBaUIsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDO0FBQzVELE1BQU0sZ0JBQWdCLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsbUJBQW1CLENBQUMsQ0FBQztBQUczRCxNQUFNLE9BQU8sR0FBRztJQUNkLE9BQU8sQ0FBQyxlQUFlO0lBQ3ZCLE9BQU8sQ0FBQyxjQUFjO0lBQ3RCLE9BQU8sQ0FBQyxNQUFNO0NBQ2YsQ0FBQztBQUVGLE1BQU0sQ0FBQztJQUNMLEtBQUssRUFBRSxnQkFBZ0IsQ0FBQyxDQUFDLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxDQUFDLEVBQUU7SUFFL0MsT0FBTyxFQUFFLE9BQU87SUFFaEIsYUFBYSxFQUFFLFFBQVEsQ0FBQyxhQUFhO0NBQ3RDLENBQUMsQ0FBQyJ9